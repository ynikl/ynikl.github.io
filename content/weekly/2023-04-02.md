---
title: "2023 04 02"
date: 2023-04-06T08:45:08+08:00
publishDate: 2023-04-06T08:45:08+08:00
draft: false
tags:
- weekly
---

### SQL 对某字段去重， 且取最新的一条数据

在SQL中，可以使用子查询和MAX函数来对某字段去重，并取最新的一条数据。以下是示例代码：
```
SELECT t1.*
FROM table_name t1
INNER JOIN (
    SELECT MAX(column1) AS max_column1
    FROM table_name
    GROUP BY column2
) t2 ON t1.column1 = t2.max_column1;
```
在上面的代码中，首先使用子查询和MAX函数，取出每个column2字段的最大值，然后将结果与原表进行INNER JOIN操作，得到最新的一条数据。
需要注意的是，如果需要根据多个字段进行去重和排序，可以在子查询中指定多个字段，并在INNER JOIN操作中使用多个字段进行连接。如果需要查询的字段比较多，可以使用通配符*来代替所有字段。
总之，在SQL中可以使用子查询和MAX函数来对某字段去重，并取最新的一条数据。需要指定需要查询的表名、字段名和排序方式，以及使用INNER JOIN操作进行连接。


### 查看是否用重复数据

```
SELECT name, COUNT(*) c FROM table GROUP BY name HAVING c > 1;
```


### mysql inner, left, right, full join

https://stackoverflow.com/a/28719292


### t+1 场景是什么意思

`t+1`场景通常指的是预测未来某个时间点的情况，即在当前时刻`t`，预测下一个时间点`t+1`的情况。这个概念在很多领域都有应用，例如金融、经济、物流、天气预报等等。
在金融领域，`t+1`场景通常指的是预测未来某个时间点的股票价格、汇率、利率等等。例如，如果当前时刻是2021年1月1日，那么预测2021年1月2日某个股票的价格就是一个`t+1`场景。
在物流领域，`t+1`场景通常指的是预测未来某个时间点的货物运输情况，例如预测某个包裹在下一个时间点是否能够按时到达目的地。
在人工智能和机器学习领域，`t+1`场景通常指的是使用历史数据来预测未来某个时间点的情况，例如预测明天的气温、下一个小时的交通流量等等。这个过程通常需要使用时间序列分析、回归分析等技术来处理。
总之，`t+1`场景是一个非常常见的概念，可以用于预测未来某个时间点的情况，帮助人们做出更好的决策。


### 湖仓能力

“湖仓能力”通常指的是企业在数据仓库（Data Warehouse）方面的能力，即构建和管理大规模数据仓库的能力。数据仓库是一个用于存储和管理企业数据的系统，它可以集成来自不同数据源的数据，并对这些数据进行处理、分析和挖掘，以帮助企业做出更好的决策。
“湖仓”是数据仓库的一种类型，它是近年来兴起的一种新型数据仓库，与传统的关系型数据仓库（RDBMS）不同，湖仓采用了分布式、非关系型的架构，可以处理更加海量和复杂的数据，例如半结构化数据、文本数据、图像数据等等。湖仓通常采用了Hadoop、Spark、Hive、Presto等开源技术来构建和管理。
因此，“湖仓能力”通常指企业在构建和管理大规模、分布式、非关系型的数据仓库方面的能力，包括数据的采集、清洗、存储、处理、分析、挖掘等等。对于现代企业来说，湖仓能力已经成为了一项非常重要的核心竞争力，可以帮助企业更好地理解和应对市场变化，提高决策的准确性和效率。


### JWT 

`header . payload . secret `

header 和 payload 都是可以使用 base64 进行解密, 获取其中的 json 信息, 是公开的.
secret 是使用header中的 加密算法 对`header+payload+secret`进行计算, 验证jwt信息没有被修改过.

https://jwt.io/introduction


### jwt

```
HMACSHA256(
  base64UrlEncode(header) + "." +
  base64UrlEncode(payload),
  your-256-bit-secret
)
```
 
### replace into

replace into 跟 insert 功能类似，不同点在于：replace into 首先尝试插入数据到表中， 1. 如果发现表中已经有此行数据（根据主键或者唯一索引判断）则先删除此行数据，然后插入新的数据。 2. 否则，直接插入新数据。
要注意的是：插入数据的表必须有主键或者是唯一索引！否则的话，replace into 会直接插入数据，这将导致表中出现重复的数据。

### golang 避免多次打印同一个错误

> 打印错误也是一种错误的处理方式. 所有, 要么选择打印错误, 要么选择向上抛出错误.
不要两者同时. 
